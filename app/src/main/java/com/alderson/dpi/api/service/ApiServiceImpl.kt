package com.alderson.dpi.api.service

import com.alderson.dpi.api.v3.models.PriceModel
import com.alderson.dpi.ui.compose.viewmodels.MainCompositionVM
import io.ktor.client.*
import io.ktor.client.features.*
import kotlinx.serialization.decodeFromString
import kotlinx.serialization.json.Json

//https://www.section.io/engineering-education/making-http-requests-with-ktor-in-android/
class ApiServiceImpl(
    private val client: HttpClient
) : ApiService {

    override suspend fun getPrice(
        state: MainCompositionVM
    ): List<PriceModel> {
        return try {
            mockedResponse
//            client.get {
//                val params2 =
//                    "form=capsule&dosage=500mg&quantity=30&drug_object=1&set_location=33166"
//                val params = """
//                    form=$form
//                    &dosage=$dosage
//                    &quantity=$quantity
//                    &drug_object=1
//                    &${
//                    zip?.let { "location=$zip" }
//                        ?: coords?.let { "set_coords=${it.toList()}" }
//                        ?: "location=10069"
//                }
//                    """.trimIndent().replace("\n", "").trim()
//
//                val priceUrl = "${ApiRoutes.V3_PRICE}$drug?${URLEncoder.encode(params2)}"
//
//                url(priceUrl)
//            }
        } catch (ex: RedirectResponseException) {
            // 3xx - responses
            println("Error: ${ex.response.status.description}")
            mockedResponse
        } catch (ex: ClientRequestException) {
            // 4xx - responses
            println("Error: ${ex.response.status.description}")
            mockedResponse
        } catch (ex: ServerResponseException) {
            // 5xx - response
            println("Error: ${ex.response.status.description}")
            mockedResponse
        }


    }

    private val mockedResponse: List<PriceModel> by lazy {
        listOf(
            Json.decodeFromString(
                "{\"drug_object\": {\"id\": 7911, \"name\": \"amoxicillin\", \"display\": \"amoxicillin\", \"dosage_display\": \"500mg\", \"form_display\": \"capsule\", \"form_plural\": \"capsules\", \"type\": \"generic\", \"drug_page_type\": \"prescription\", \"drug_market_type\": \"on-market\", \"drug_slug\": \"amoxicillin\", \"form\": \"capsule\", \"dosage\": \"500mg\", \"dosage_form_display\": \"30 capsules of amoxicillin 500mg\", \"dosage_form_display_short\": \"30 capsules 500mg\", \"quantity\": 30, \"is_default\": false, \"label\": \"amoxicillin\", \"drug_display\": {\"primary_title\": \"Amoxicillin\", \"secondary_title\": \"Generic Amoxil\", \"header_title\": \"Amoxicillin\", \"primary_title_html\": \"<a href=\\\"/amoxicillin\\\">Amoxicillin</a>\", \"secondary_title_html\": \"Generic <a href=\\\"/amoxil\\\">Amoxil</a>\", \"header_title_html\": \"<a href=\\\"/amoxicillin\\\">Amoxicillin</a>\"}}, \"formatted_average_price\": \"\$12.80\", \"formatted_low_price\": \"around \$7.77\", \"formatted_percent_saved\": \"39%\", \"seo_savings\": 39, \"low_price\": \"7.77\", \"quantity\": 30.0, \"drug_id\": 7911, \"prices\": [{\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"7.77\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"M60mvJqa5igmqzZVYJpOroHMVdA= n-QWCHsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE0MTI2LCAicHJpY2UiOiA3Ljc2OTk5OTk4MDkyNjUxNCwgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"extras\": \"M60mvJqa5igmqzZVYJpOroHMVdA= n-QWCHsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE0MTI2LCAicHJpY2UiOiA3Ljc2OTk5OTk4MDkyNjUxNCwgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"coupon_network\": \"scriptcycle_02\", \"savings\": \"7.21\", \"savings_percent\": \"48%\", \"cash_price\": \"14.98\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Kroger Pharmacy\", \"id\": 4, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Kroger Rx Savings Club members can buy 100+ common prescriptions for FREE, \$3 or \$6. Sign up to 6 people, including pets!\", \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"8.70\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"tKVBjQ_pbC1RWV3KFxyyngrnXDI= AKjgFHsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE0ODM0LCAicHJpY2UiOiA4LjY5OTk5OTgwOTI2NTEzNywgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"extras\": \"tKVBjQ_pbC1RWV3KFxyyngrnXDI= AKjgFHsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE0ODM0LCAicHJpY2UiOiA4LjY5OTk5OTgwOTI2NTEzNywgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"coupon_network\": \"navitus_03\", \"savings\": \"4.29\", \"savings_percent\": \"33%\", \"cash_price\": \"12.99\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Costco\", \"id\": 31240, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Costco's pharmacies are open to members and non-members. Members can receive additional discounts through Costco's Member Prescription Program. Costco Home Delivery is the mail-order branch of the pharmacy.\", \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Cash\", \"type\": \"cash\", \"price\": \"9.02\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Walmart\", \"id\": 1, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Walmart offers select generic medications at \$4 for a 30-day supply and \$10 for a 90-day supply. There is no membership required, and these low cash prices are available with or without prescription coverage. In addition to offering savings for popular generic medications, Walmart also offers online refill and transfer requests, and a selection of women's and men's health prescriptions for \$9 and \$24.\", \"disclaimer\": \"Walmart offers generic medications for as low as \$4 for a 30-day supply and \$10 for a 90-day supply.\", \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": true, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"10.12\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"_TJlP1zPjG1GyyzBlCFHeI8CeOM= DbT7r3sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE1OTQsICJwcmljZSI6IDEwLjEyMjMwMDE0ODAxMDI1NCwgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"extras\": \"_TJlP1zPjG1GyyzBlCFHeI8CeOM= DbT7r3sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE1OTQsICJwcmljZSI6IDEwLjEyMjMwMDE0ODAxMDI1NCwgImxhdCI6IG51bGwsICJsb24iOiBudWxsLCAiZGlzdGFuY2VfbWkiOiBudWxsLCAiemlwX2NvZGUiOiBudWxsLCAic3RhdGUiOiBudWxsLCAicHJpY2VfZmlsdGVycyI6IFsiYXBwZW5kX3RvcF9zdGF0ZV9waGFybWFjeSIsICJpbmNsdWRlX2VzcngiLCAicmVtb3ZlX2tyb2dlcnNjX3ByaWNlcyIsICJpbmNsdWRlX3JlZ2lzdGVyZWRfdXNlcl9wcmljZXMiXSwgInBoYXJtX2ZpbHRlcnMiOiBudWxsLCAicG9zX2NhbXBhaWduIjogIiJ9\", \"coupon_network\": \"envisionrx_05\", \"savings\": \"26.00\", \"savings_percent\": \"72%\", \"cash_price\": \"36.12\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Rite Aid\", \"id\": 23357, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Rite Aid offers online prescription management and transfers. Membership in the free Rite Aid Rx Savings Program offers additional savings.\", \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"10.78\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"d3v-4V6lN6CMyIsS_NzU_a1huzs= Zmpc23sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE2NjEsICJwcmljZSI6IDEwLjc4MDMwMDE0MDM4MDg2LCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"extras\": \"d3v-4V6lN6CMyIsS_NzU_a1huzs= Zmpc23sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE2NjEsICJwcmljZSI6IDEwLjc4MDMwMDE0MDM4MDg2LCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"coupon_network\": \"envisionrx_05\", \"savings\": \"6.16\", \"savings_percent\": \"36%\", \"cash_price\": \"16.94\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Walgreens\", \"id\": 3, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": null, \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"11.24\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"_5A2fFSAZWVwNAB2G02seAOlZ7E= tRlYWnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE3MjM5NiwgInByaWNlIjogMTEuMjQyMDAwNTc5ODMzOTg0LCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"extras\": \"_5A2fFSAZWVwNAB2G02seAOlZ7E= tRlYWnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE3MjM5NiwgInByaWNlIjogMTEuMjQyMDAwNTc5ODMzOTg0LCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"coupon_network\": \"argus_walmart\", \"savings\": \"4.48\", \"savings_percent\": \"29%\", \"cash_price\": \"15.72\", \"is_transfer_eligible\": true, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"CVS Pharmacy\", \"id\": 2, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": null, \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"11.93\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"JlFVdDPE9DFoWxeK9nW5gpissv0= cPhmC3sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE3ODg0MywgInByaWNlIjogMTEuOTI4NTgwMjg0MTE4NjUyLCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"extras\": \"JlFVdDPE9DFoWxeK9nW5gpissv0= cPhmC3sibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE3ODg0MywgInByaWNlIjogMTEuOTI4NTgwMjg0MTE4NjUyLCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"coupon_network\": \"scriptcycle_02\", \"savings\": \"9.17\", \"savings_percent\": \"43%\", \"cash_price\": \"21.10\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Safeway\", \"id\": 83286, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Safeway offers online refills as well as flu shots and immunizations.\", \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"11.93\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"EXCycPyzbHYCF6h_HiwWR0iULM8= KSWIPnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE4NTU3MSwgInByaWNlIjogMTEuOTI4NTgwMjg0MTE4NjUyLCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"extras\": \"EXCycPyzbHYCF6h_HiwWR0iULM8= KSWIPnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE4NTU3MSwgInByaWNlIjogMTEuOTI4NTgwMjg0MTE4NjUyLCAibGF0IjogbnVsbCwgImxvbiI6IG51bGwsICJkaXN0YW5jZV9taSI6IG51bGwsICJ6aXBfY29kZSI6IG51bGwsICJzdGF0ZSI6IG51bGwsICJwcmljZV9maWx0ZXJzIjogWyJhcHBlbmRfdG9wX3N0YXRlX3BoYXJtYWN5IiwgImluY2x1ZGVfZXNyeCIsICJyZW1vdmVfa3JvZ2Vyc2NfcHJpY2VzIiwgImluY2x1ZGVfcmVnaXN0ZXJlZF91c2VyX3ByaWNlcyJdLCAicGhhcm1fZmlsdGVycyI6IG51bGwsICJwb3NfY2FtcGFpZ24iOiAiIn0=\", \"coupon_network\": \"scriptcycle_02\", \"savings\": \"9.10\", \"savings_percent\": \"43%\", \"cash_price\": \"21.02\", \"is_transfer_eligible\": false, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Albertsons\", \"id\": 85327, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": \"Albertsons offers online refills, transfers, and mail-order delivery. In some states, the Albertsons MyRxCare Program offers additional prescription savings with an annual membership fee.\", \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}, {\"type_display\": \"Coupon\", \"type\": \"coupon\", \"price\": \"13.19\", \"show_discount_card\": false, \"other_price_data\": null, \"logo\": null, \"logo_secondary\": null, \"pricing_params\": \"H88gJX7vD-94CXelFq5NfNKiAPM= UI0eqnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE4OTk2MywgInByaWNlIjogMTMuMTg4MDk5ODYxMTQ1MDIsICJsYXQiOiBudWxsLCAibG9uIjogbnVsbCwgImRpc3RhbmNlX21pIjogbnVsbCwgInppcF9jb2RlIjogbnVsbCwgInN0YXRlIjogbnVsbCwgInByaWNlX2ZpbHRlcnMiOiBbImFwcGVuZF90b3Bfc3RhdGVfcGhhcm1hY3kiLCAiaW5jbHVkZV9lc3J4IiwgInJlbW92ZV9rcm9nZXJzY19wcmljZXMiLCAiaW5jbHVkZV9yZWdpc3RlcmVkX3VzZXJfcHJpY2VzIl0sICJwaGFybV9maWx0ZXJzIjogbnVsbCwgInBvc19jYW1wYWlnbiI6ICIifQ==\", \"extras\": \"H88gJX7vD-94CXelFq5NfNKiAPM= UI0eqnsibmV0d29yayI6IG51bGwsICJzZWFyY2hfdGltZSI6IDE2NzYwNjMyMTQuNzE4OTk2MywgInByaWNlIjogMTMuMTg4MDk5ODYxMTQ1MDIsICJsYXQiOiBudWxsLCAibG9uIjogbnVsbCwgImRpc3RhbmNlX21pIjogbnVsbCwgInppcF9jb2RlIjogbnVsbCwgInN0YXRlIjogbnVsbCwgInByaWNlX2ZpbHRlcnMiOiBbImFwcGVuZF90b3Bfc3RhdGVfcGhhcm1hY3kiLCAiaW5jbHVkZV9lc3J4IiwgInJlbW92ZV9rcm9nZXJzY19wcmljZXMiLCAiaW5jbHVkZV9yZWdpc3RlcmVkX3VzZXJfcHJpY2VzIl0sICJwaGFybV9maWx0ZXJzIjogbnVsbCwgInBvc19jYW1wYWlnbiI6ICIifQ==\", \"coupon_network\": \"bc_01\", \"savings\": \"2.68\", \"savings_percent\": \"17%\", \"cash_price\": \"15.87\", \"is_transfer_eligible\": true, \"transfer_region\": null, \"special_discount\": null, \"note\": \"(show coupon to get this price)\", \"pharmacy_locations_object\": [], \"pharmacy_object\": {\"name\": \"Target (CVS)\", \"id\": 6, \"has_24hr\": false, \"closest_location\": null, \"type\": \"chain\", \"number_of_locations\": 0, \"info\": null, \"disclaimer\": null, \"popularity_rank\": null, \"block_logo\": false, \"block_pharmacy_name\": false, \"use_discount_noun\": false, \"alternate_logo\": null, \"block_cash_price\": false, \"block_drug_name\": false}}], \"price_disclaimer_text\": \"\\n    GoodRx's cash prices are based on multiple sources, including published\\n    price lists, purchases, claims records, and data provided by pharmacies.\\n    Our discount and coupon prices are based on contracts between a pharmacy\\n    (or pharmacy purchasing group) and a Pharmacy Benefit Manager (PBM), who\\n    provides prices to us. The prices we show are our best estimate; while we\\n    believe our data to be generally accurate, we cannot guarantee that the\\n    price we display will exactly match the price you receive at the\\n    pharmacy. For an exact price, please contact the pharmacy. (Please keep in\\n    mind that the pharmacy will require the information shown on the GoodRx\\n    coupon/discount to confirm the discount price.)\\n    \", \"no_price_disclaimer\": \"\", \"drug_error_disclaimer\": \"\", \"gold_promotion\": null, \"sponsored_listing\": null, \"banner\": null}"
            )
        )
    }
}